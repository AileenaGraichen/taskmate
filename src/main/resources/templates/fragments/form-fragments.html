<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="../../static/css/styles.css" th:href="@{css/styles.css}"/>
    <link rel="stylesheet" type="text/css" href="../../static/css/infoSidebarStyles.css" th:href="@{css/infoSidebarStyles.css}"/>
    <script type="text/javascript" src="../../static/javascript/script.js" th:src="@{/static/javascript/script.js}"></script>
</head>
<body>

<form th:fragment="register" class="" action="/register" th:action="@{/register}" method="POST">
    <div class="form-container">
            <h1>Register</h1>
            <input type="text" placeholder="First Name" name="first-name" required>
            <input type="text" placeholder="Last Name" name="last-name" required>
            <input type="email" placeholder="Email" name="email" required>
            <input type="password" placeholder="Password" name="password" required>
            <a id="register" class="hover-link" onclick="showLoginForm()">Already have an account? Login here.</a>
    </div>
    <div class="form-container">
        <button class="button-header" type="submit">REGISTER</button>
    </div>
</form>

<form th:fragment="login-form" class="" action="/login" th:action="@{/login}" method="POST">
    <div class="form-container">
        <h1>Login</h1>
        <input label="E-Mail" type="email" id="email" placeholder="Email" name="email" required>
        <input type="password" id="password" placeholder="Password" name="password" required>
        <a id="loginLink" class="hover-link" onclick="showRegisterForm()">No account yet? Register here.</a>
    </div>
    <div class="form-container">
        <button class="button-header" type="submit" th:href="@{/projects}">LOGIN</button>
    </div>
</form>

<form th:fragment="create-project-form" class="createForm" action="/create-project" th:action="@{/create-project}" method="POST">
    <div class="createFormInfo">
        <span class="closeProj" th:onclick="closeCreateProject()">&times;</span>
        <h4>Add project</h4>
        <div class="nameDescription">
            <input type="text" placeholder="Project Name" name="project-name" required>
            <textarea placeholder="Description" name="description"></textarea>
        </div>
        <div class="dates">
            <div class="sDate">
                <label for="start-date">Start Date</label>
                <input type="date" id="start-date" placeholder="Start Date" name="start-date" required>
            </div>
            <div class="eDate">
                <label for="End-date">End Date</label>
                <input type="date" id="end-date" placeholder="End Date" name="end-date" required>
            </div>
        </div>
    </div>
    <div class="createButton">
        <button class="button-header" type="submit" th:href="@{/projects}">Create</button>
    </div>
</form>

<form th:fragment="update-project-form" class="" action="/update-project" th:action="@{/update-project}" method="post">
    <div class="">
        <input type="text" placeholder="Project Name" name="project-name" th:value="${session.project.projectName}">
        <label for="description">Description:</label><br/>
        <textarea rows="4" cols="40" id="description" placeholder="Description" name="description" th:text="${session.project.description}" ></textarea>
        <input type="date" placeholder="Start Date" name="start-date" th:value="${session.project.startDate}">
        <input type="date" placeholder="End Date" name="end-date" th:value="${session.project.endDate}">
    </div>
    <div>
        <button class="button-header" type="submit">Save</button>
    </div>
</form>

<form th:fragment="create-section-form" class="createForm" action="/create-section" th:action="@{/create-section}" method="post">
    <div class="createFormInfo">
        <span class="closeProj" th:onclick="closeCreateSection()">&times;</span>
        <h4>Add section</h4>
        <div class="nameDescription">
            <input type="text" placeholder="Section Name" name="section-name" required>
            <textarea type="text" placeholder="Description" name="description"></textarea>
        </div>
        <div class="dates">
            <div class="sDate">
                <label for="start-date">Start Date</label>
                <input type="date" placeholder="Start Date" name="start-date" required>
            </div>
            <div class="eDate">
                <label for="end-date">End Date</label>
                <input type="date" placeholder="End Date" name="end-date" required>
            </div>
        </div>
    </div>
    <div class="createButton">
        <button class="button-header" type="submit" th:href="@{/project-page}">Create</button>
    </div>
</form>

<form th:fragment="create-activity-form" class="createForm" action="/create-activity" th:action="@{/create-activity}" method="post">
    <div class="createFormInfo">
        <span class="closeProj" th:onclick="closeCreateActivity()">&times;</span>
        <h4>Add activity</h4>
        <div class="nameDescription">
            <input type="text" placeholder="Activity Name" name="activity-name" required>
            <textarea type="text" placeholder="Description" name="description"></textarea>
        </div>
        <div class="createDuration">
            <div class="hours">
                <label for="durationInHours">Duration in hours</label>
                <input type="number" class="createDur" placeholder="Duration In Hours" name="duration" required>
            </div>
        </div>
    </div>
    <div class="createButton">
        <button class="button-header" type="submit" th:href="@{/section-page}">Create</button>
    </div>
</form>

<form th:fragment="create-task-form" class="createForm" action="/create-task" th:action="@{/create-task}" method="post">
    <div class="createFormInfo">
        <span class="closeProj" th:onclick="closeCreateTask()">&times;</span>
        <h4>Add task</h4>
        <div class="nameDescription">
            <input type="text" placeholder="Task Name" name="Task-name" required>
            <textarea type="text" placeholder="Description" name="description"></textarea>
        </div>
        <div class="createDuration">
            <div class="hours">
                <label for="durationInHours">Duration in hours</label>
                <input type="number" class="createDur" placeholder="Duration In Hours" name="duration" required>
            </div>
        </div>
    </div>
    <div class="createButton">
        <button class="button-header" type="submit" th:href="@{/activity-page}">Create</button>
    </div>
</form>

<form th:fragment="update-section-form" th:action="@{/update-section}" method="post">
    <input type="hidden" name="section-id" th:value="${section.id}">
    <div class="sidebar-info">
        <input class="no-style-input" type="text" placeholder="Section Name" name="section-name" th:value="${section.sectionName}">
        <h3>Duration</h3>
        <div class="sidebar-info-duration">
            <span>From:</span>
            <input type="date" placeholder="Start Date" name="start-date" th:value="${section.startDate}">
            <span>To:</span>
            <input type="date" placeholder="End Date" name="end-date" th:value="${section.endDate}">
        </div>
        <h3>Description</h3>
        <div class="sidebar-info-description">
            <textarea id="section-description" placeholder="Description" name="description" th:text="${section.description}"></textarea>
        </div>
    </div>
    <button class="button-submit" type="submit">Save</button>
</form>

<form th:fragment="update-activity-form" class="sidebar-form" th:action="@{/update-activity}" method="post">
    <input type="hidden" name="activity-id" th:value="${activity.id}">
    <div class="sidebar-info">
        <input class="no-style-input" type="text" placeholder="Activity Name" name="activity-name" th:value="${activity.activityName}">
        <h3>Duration</h3>
        <div class="sidebar-info-duration">
            <span>Hours:</span>
            <input type="number" step="0.25" placeholder="Hours" name="duration" th:value="${activity.durationInHours}">
        </div>
        <h3>Description</h3>
        <div class="sidebar-info-description">
            <textarea id="activity-description" placeholder="Description" name="description" th:text="${activity.description}"></textarea>
        </div>
        <h3>Status</h3>
        <div class="sidebar-info-status">
            <div th:switch="${activity.status}">
                <p th:case="0">Not Started</p>
                <p th:case="1">In Progress</p>
                <p th:case="2">Done</p>
            </div>
            <div>
                <select name="activity-status">
                    <option th:value="0">Not Started</option>
                    <option th:value="1">In Progress</option>
                    <option th:value="2">Done</option>
                </select>
            </div>
        </div>
    </div>
    <button class="button-submit" type="submit">Save</button>
</form>

<form th:fragment="update-task-form" class="sidebar-form" th:action="@{/update-task}" method="post">
    <input type="hidden" name="task-id" th:value="${task.id}">
    <div class="sidebar-info">
        <input class="no-style-input" type="text" placeholder="Task Name" name="task-name" th:value="${task.taskName}">
        <h3>Duration</h3>
        <div class="sidebar-info-duration">
            <span>Hours:</span>
            <input type="number" step="0.25" placeholder="Hours" name="duration" th:value="${task.durationInHours}">
        </div>
        <h3>Description</h3>
        <div class="sidebar-info-description">
            <textarea id="task-description" placeholder="Description" name="description" th:text="${task.description}"></textarea>
        </div>
    </div>
    <button class="button-submit" type="submit">Save</button>
</form>

<div th:fragment="section-info-sidebar" class="sidebar-modal-content">
    <span class="close" th:onclick="toggleSectionInfoSideBar([[${section.id}]])">&times;</span>
    <div class="sidebar-form-wrapper" th:insert="fragments/form-fragments :: update-section-form" th:with="section = ${section}"></div>
    <div class="sidebar-buttons">
        <button class="button-header">Open</button>
    </div>
</div>

<div th:fragment="activity-info-sidebar" class="sidebar-modal-content">
    <span class="close" th:onclick="toggleActivityInfoSideBar([[${activity.id}]])">&times;</span>
    <div class="sidebar-form-wrapper" th:insert="fragments/form-fragments :: update-activity-form" th:with="activity = ${activity}"></div>
    <div class="sidebar-assignees">
        <h1>People Assigned</h1>
        <div class="assignees-content">
                <table>
                    <tr>
                        <th>Person</th>
                        <th>Hours</th>
                    </tr>
                    <tr th:each="assignment : ${activity.assignments}">
                        <td th:text="${assignment.userFirstName}"></td>
                        <td th:text="${assignment.hoursAssigned}"></td>
                    </tr>
                </table>
            <button onclick="toggleActivityAssigneesForm()">Add</button>
            <div class="modal" id="activity-assignee-form" th:insert="fragments/form-fragments :: activity-assignee-form" th:with="activity = ${activity}"></div>
        </div>
    </div>
    <div class="sidebar-buttons">
        <button class="button-header">Open</button>
    </div>
</div>

<div th:fragment="task-info-sidebar" class="sidebar-modal-content">
    <span class="close" th:onclick="toggleTaskInfoSideBar([[${task.id}]])">&times;</span>
    <div class="sidebar-form-wrapper" th:insert="fragments/form-fragments :: update-task-form" th:with="task = ${task}"></div>
    <div class="sidebar-assignees">
        <h1>People Assigned</h1>
        <div class="assignees-content">
            <table>
                <tr>
                    <th>Person</th>
                    <th>Hours</th>
                </tr>
                <tr th:each="assignment : ${task.assignments}">
                    <td th:text="${assignment.userFirstName}"></td>
                    <td th:text="${assignment.hoursAssigned}"></td>
                </tr>
            </table>
            <button onclick="toggleTaskAssigneesForm()">Add</button>
            <div class="modal" id="task-assignee-form" th:insert="fragments/form-fragments :: task-assignee-form" th:with="task = ${task}"></div>
        </div>
    </div>
</div>

<form th:fragment="activity-assignee-form" class="assignees-modal-content" th:action="@{/update-activity-assignment}" method="post">
    <h1>Assign People</h1>
    <div>
        <input type="hidden" name="activity-id" th:value="${activity.id}">
        <label>Person</label>
        <select name="selected-user">
            <option th:each="member : ${session.team}" th:value="${member.userId}" th:text="${member.userFirstName}"></option>
        </select>
        <label>Hours</label>
        <input type="number" step="0.25" name="hours-assigned">
    </div>
    <button type="submit">Save</button>
</form>

<form th:fragment="task-assignee-form" class="assignees-modal-content" th:action="@{/update-task-assignment}" method="post">
    <h1>Assign People</h1>
    <div>
        <input type="hidden" name="task-id" th:value="${task.id}">
        <label>Person</label>
        <select name="selected-user">
            <option th:each="member : ${session.team}" th:value="${member.userId}" th:text="${member.userFirstName}"></option>
        </select>
        <label>Hours</label>
        <input type="number" step="0.25" name="hours-assigned">
    </div>
    <button type="submit">Save</button>
</form>

</body>
</html>